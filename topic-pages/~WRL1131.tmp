#3 🛡️ Part 1: pfSense VM --- Adapter Settings & LAN IP Configuration

##3 📌 Introduction

> In this part of the lab, we'll configure pfSense as the firewall and
> gateway for our VirtualBox SOC setup.
>
> We'll attach two adapters (WAN and LAN) and assign a static LAN IP.

##3 💡 Tip: Keep ChatGPT Handy

> If pfSense doesn't boot or your LAN IP won't respond, ask ChatGPT:
>
> "I'm setting up pfSense in VirtualBox with NAT + Internal adapters.
> LAN should be 192.168.10.1 but it's
>
> not reachable. Here's my adapter setup and console output: \<*state
> errors here*\>. What should I check?"

##3 🔹 Step 1: pfSense Adapters (Adapter 1 \[WAN\] and Adapter 2 \[LAN\]) Settings

> 1\\. **Power off** the pfSense VM.
>
> 2\\. Open **Settings** → **Network**.

- **Adapter 1** (WAN):

> **Note:** Using NAT for Internet Access and Port Forwarding for Host
> access to pfSense GUI
>
> \- Check **Enable Network Adapter[✓]{.mark}**\
> - Attached to: **NAT**
>
> \- Promiscuous Mode: **Allow All**
>
> \- Click **Port Forwarding**
>
> ![](media/image1.png){width="5.555555555555555in"
> height="2.888888888888889in"}

3\\. Click **'+' (Add button)** to set Port Forwarding Rules:

> \- Name: **pfSense**\
> - Protocol: **TCP**\
> - Host IP: **(leave blank)**\
> - Host Port: **8443**
>
> \- Guest IP: **10.0.2.15**
>
> \- Guest Port: **8443**

4\\. Click **OK**

> ![](media/image2.png){width="5.555555555555555in"
> height="2.8680555555555554in"}

- **Adapter 2** (LAN):

> \- Check **Enable Network Adapter[✓]{.mark}**\
> - Attached to: **Internal Network**\
> - Name: **LabNet** (or any name you want just make sure that all VMs
> have the same network name)\
> - Promiscuous Mode**: Allow All**

\- Click **OK** to save settings and exit.

![](media/image3.png){width="5.555555555555555in"
height="2.895832239720035in"}

## 🔹 Step 2: Configure LAN Static IP

1.  Boot pfSense and assign interfaces and Static IP Addresses to:

> \- em0 → WAN (NAT) \| \*will be automatically assigned by VirtualBox\
> - em1 → LAN (LabNet) \| \*will be set up manually
>
> 2\. From pfSense console menu, **choose (2)** - Set interface(s) IP
> address.\
> 3. Select LAN: **choose (2)**\
> 4. Enter **Static IP Address**:
>
> \- IPv4 address: **192.168.10.1**
>
> ![](media/image4.png){width="5.600685695538058in"
> height="2.90535542432196in"}
>
> \- Subnet mask (CIDR): **/24**\
> - Gateway: **(leave blank)**\
> - IPv6: **none**\
> - DHCP server: **No** (because we are using Static IP address for our
> LAN)\
> - Keep HTTPS **enabled**
>
> ![](media/image5.png){width="5.531439195100613in"
> height="2.8901771653543307in"}

- The Static IP Address of pfSense VM is now set to **192.168.10.1**

> \- Press **ENTER** to continue
>
> ![](media/image6.png){width="5.501791338582677in"
> height="2.8746861329833773in"}

- The pfSense Firewall GUI can be access by opening the following URL on
  Kali Linux or

> Windows10 VM browser after their Adapter setup:
>
> Default User Name: **admin**
>
> Default Password: **admin**
>
> [https://192.168.10.1:8443](https://192.168.10.1:84431)
>
> or
>
> You can try to access from your host machine' browser. (This is the
> reason why we set Port Forwarding on NAT.)
>
> **Note:** If the host browser can't access the **pfSense GUI**, on the
> pfSense VM console --
>
> select option (**8**) Shell, and run **pfctl -d** to temporarily
> disable packet filtering.
>
> After that, try accessing the pfSense Firewall GUI from the host's
> browser to set or reset the password.
>
> <https://127.0.0.1:8443>
>
> <https://192.168.10.1:8443>
>
> <https://localhost:8443>

# ![](media/image7.png){width="5.555555555555555in" height="2.8680555555555554in"}

> \[🔙 Back to Home\](../index.md)
